---
title: "nvidia_prediction_markdown"
author: "Naren Akurati"
date: "3 Juli 2018"
output: html_document
---

```{r}
Sys.setenv(LANG = "en")
#Read in the data
xx80 <- read.csv("xx80.csv", sep = ";")
xx80
#Note that the only metrics we see grow linearly are transistor density, cuda core count, core speed, and processing power
#For cards with boost capabilities, we only consider the highest speeds, as performance benchmarks always bring out these speeds in the cards

#Play with linear model
library(ggplot2)
m1 <- lm(xx80$core_speed ~ as.Date(xx80$launch))
summary(m1)

#plot(xx80$core_speed ~ as.Date(xx80$launch))

ggplot(xx80, aes(x = as.Date(launch), y = core_speed)) + geom_point() + geom_smooth(method=lm, se=FALSE)
ggplot(xx80, aes(x = as.Date(launch), y = cuda_cores)) + geom_point() + geom_smooth(method=lm, se=FALSE)
ggplot(xx80, aes(x = as.Date(launch), y = core_speed)) + geom_point() + geom_smooth(method=lm, se=FALSE)
ggplot(xx80, aes(x = as.Date(launch), y = processing_power_single)) + geom_point() + geom_smooth(method=lm, se=FALSE)

transistor_density <- xx80$transistors_millions/xx80$die_size
transistor_density
#million transistors per square mm

#Moore's law predicts that the number of transistors per square inch doubles each year

#1 square mm = 0.00155 square inch
scaled_transistor_density <- xx80$transistors_millions/xx80$die_size*0.00155
scaled_transistor_density

#moore's predicted transistor density
moore_predicted_scaled_transistory_density <- rep(scaled_transistor_density[1], 7) * c(1,2,4,8,16,32,64)
moore_predicted_scaled_transistory_density

moore_dates <- c("2009-01-08", "2011-01-08", "2013-01-08", "2015-01-08", "2017-01-08", "2019-01-08", "2021-01-08")

transistor_df <- data.frame("date" = c(as.Date(xx80$launch), as.Date(moore_dates)), "transistors" = c(scaled_transistor_density, moore_predicted_scaled_transistory_density), "type" = c(rep("real", 7), rep("moore", 7))) 
transistor_df

nvidia_transistor_model <- lm(log2(transistors[1:7]) ~ date[1:7], data = transistor_df)
summary(nvidia_transistor_model)

nvidia_transistor_model2 <- lm(transistors[1:7] ~ date[1:7], data = transistor_df)
summary(nvidia_transistor_model2)

moore_transistor_model <- lm(log2(transistors[7:13]) ~ date[7:13], data = transistor_df)
summary(moore_transistor_model)

#ggplot(transistor_df, aes(x = date, y = transistors, color = type)) + geom_point() + geom_smooth(aes(color = type), method="nls", formula = y ~ x^2, se=FALSE) # + facet_wrap(~ type)

ggplot(transistor_df, aes(x = date, y = transistors, color = type)) + geom_point() + geom_smooth(se=FALSE)

#ggplot(xx80, aes(x = as.Date(launch), y = scaled_transistor_density, color = "red")) + geom_point() + geom_smooth(method=lm, se=FALSE)

#ggplot(xx80, aes(x = as.Date(launch), y = moore_predicted_scaled_transistory_density, color = "white")) + geom_point() + geom_smooth(method=lm, se=FALSE)

```
